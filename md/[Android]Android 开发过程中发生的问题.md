# Android å¼€å‘è¿‡ç¨‹ä¸­å‘ç”Ÿçš„é—®é¢˜

## å…³äºèµ„æº

menu èµ„æºæ–‡ä»¶ä¸­ï¼Œåˆ›å»ºçš„ `SearchView`å¯èƒ½ä¼šæ— æ³•ä½¿ç”¨ï¼Œæˆ‘è®¤ä¸ºåŸå› åœ¨`showAsAction` å’Œ`actiovViewClass` ï¼Œä»–ä»¬çš„å‰ç¼€æ˜¯`app` ï¼Œä½†æ˜¯ä½ çš„é¡¹ç›®å¦‚æœæ˜¯`androidx` çš„ï¼Œå¯èƒ½å°±ä¼šå‘ç”Ÿé—®é¢˜ï¼Œéœ€è¦æ”¹å›`android` ï¼ŒAndroid Studio è¿˜ä¼šå‘ç”Ÿé”™è¯¯è­¦å‘Šï¼Œä¸è®©æˆ‘ç”¨è¿™ä¸ªå‰ç¼€ï¼ˆğŸ˜”ï¼‰ã€‚é€šè¿‡è½¯ä»¶å†…çš„åé¦ˆï¼Œåé¢å…·ä½“çš„å°±ä»–ä»¬è§£å†³äº†ã€‚

## å…³äºä»£ç 

1. å½“æ—¶ä½¿ç”¨`SearchView` æ—¶ï¼Œå…¶ä»–åšå®¢é‡Œè¯´çš„è®¾ç½®ç›‘å¬äº‹ä»¶åœ¨`onPrepareOptionsMenu` ï¼Œå¯æ˜¯è¿™ä¸ªå‡½æ•°ä¼šåœ¨æ¯ä¸€æ¬¡ç‚¹å‡»é‚£ä¸‰ä¸ªç‚¹éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ„Ÿè§‰æ•ˆç‡ä¸å¥½ï¼Œè¿™ç§ç›‘å¬äº‹ä»¶ä¸€èˆ¬ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè¿˜æ˜¯å’Œåˆ›å»ºmenuçš„ä»£ç æ”¾åˆ°ä¸€èµ·å§ã€‚ä¸è¿‡å…³äºè®¾ç½®menu çš„æ¯ä¸€ä¸ªé¡¹çš„æ—¶å€™ï¼Œæ¯”å¦‚æ˜¯å¦å¯ç”¨ï¼Œæ˜¯å¦é€‰ä¸­ï¼Œå°±åªèƒ½åœ¨`onPrepareOptionsMenu` ã€‚

2. è¯»å–sqlite æ•°æ®åº“ï¼ŒæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸`unknown error (code 14): Could not open database`ã€‚æ‰¾äº†å¾ˆå¤šç­”æ¡ˆï¼Œéƒ½ä¸è¡Œã€‚åœ¨æ¨¡æ‹Ÿå™¨æ²¡æœ‰é—®é¢˜ï¼Œæ”¾åˆ°å°ç±³ï¼ˆå°ç±³8 MIUI 9.11.14ï¼‰ä¸Šå°±ä¸è¡Œäº†ï¼Œçªç„¶æƒ³åˆ°æˆ‘æ›´æ”¹äº†ç›®æ ‡ç‰ˆæœ¬ï¼Œå›é€€è¿‡å»ï¼Œæ²¡é—®é¢˜äº†ã€‚ä½†æ˜¯æˆ‘éœ€è¦çŸ¥é“è¿™æ˜¯å°ç±³çš„é—®é¢˜è¿˜æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç„¶åè¿è¡Œæˆ‘çš„`API` ä¸º29çš„è™šæ‹Ÿæœºï¼Œæ²¡æœ‰é—®é¢˜ï¼ˆå½“å‰ç›®æ ‡ç‰ˆæœ¬æ˜¯28ï¼Œå› ä¸ºå›é€€äº†ä¸€æ¬¡ï¼‰ï¼Œç„¶åå†ä¸€æ¬¡è°ƒæ•´ç›®æ ‡ç‰ˆæœ¬ä¸º29ï¼Œä¾ç„¶æ²¡æœ‰é—®é¢˜ï¼Œé‚£åº”è¯¥å°±æ˜¯å°ç±³çš„é—®é¢˜äº†ï¼ŒæŠŠ`å°ç±³ 29 sqlite` çš„å…³é”®è¯æ”¾åˆ°æœç´¢å¼•æ“ä¸Šæ‰¾ä¸åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜æˆ‘è‡³ä»Šæ— æ³•è§£å†³ï¼ˆå°è¯•åé¦ˆç»™å°ç±³ï¼‰ã€‚

3. TextView è®¾ç½®æ–‡å­—å¤§å°ï¼ˆ`setTextSize()`ï¼‰æ— æ•ˆã€‚åŸå› æ˜¯åœ¨ä¸‹é¢è¿˜è°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°`setTextAppearance`ï¼Œé€šè¿‡æŸ¥çœ‹æºä»£ç ï¼Œåº”è¯¥æ˜¯åœ¨`applyTextAppearance` å‡½æ•°ä¸­çš„

    ```java
        if (attributes.mTextSize != 0) {
            setRawTextSize(attributes.mTextSize, true /*    shouldRequestLayout */);
        }
    ```

    å¯¼è‡´çš„ï¼Œéœ€è¦æŠŠè®¾ç½®å¤§å°æ”¾åˆ°è¿™ä¸ªå‡½æ•°çš„ä¸‹é¢è€Œä¸æ˜¯ä¸Šé¢ã€‚

4. å½“æˆ‘åœ¨å¹¿æ’­æ¥æ”¶å™¨ä¸­æ‰“å¼€åº”ç”¨æ—¶â€”é€šè¿‡`startActivity` ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡æˆåŠŸï¼Œå…¶ä»–å…¨éƒ¨å¯åŠ¨å¤±è´¥ï¼Œä½†æ˜¯æˆ‘çš„Pixel è™šæ‹Ÿæœºå°±æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘çš„æœºå™¨è¿˜æ˜¯å°ç±³8ğŸ˜”ã€‚åç»­å‘ç°ä¸æ­¢æ˜¯åœ¨å¹¿æ’­æ¥æ”¶å™¨ä¸­ï¼Œåªè¦ä¸æ˜¯åœ¨Activity ä¸­å¯åŠ¨éƒ½ä¸è¡Œï¼Œæ—¥å¿—æ˜¾ç¤º

    >I/Timeline: Timeline: Activity_launch_request time:xxxxxxx

    æ„Ÿè§‰å’Œå°ç±³çš„é˜»æ­¢é“¾å¼è°ƒç”¨æœ‰å…³ï¼Œå´ä¸çŸ¥é“è¯¥å¦‚æœå¤„ç†ğŸ˜”ã€‚

    è¿™ä¸ªä¹Ÿæ‰¾åˆ°åŠæ³•äº†ï¼Œç»™åº”ç”¨`åå°å¼¹å‡ºç•Œé¢`æƒé™å³å¯ã€‚

5. å¼€å‘æ—¶åšä¸€ä¸ªgroup notificationï¼Œæ¯ä¸€ä¸ªé€šçŸ¥æœ‰ä¸‰ä¸ªæŒ‰é’®ï¼Œç„¶ååœ¨æ¥å—Intent ä¼ å…¥çš„å€¼æ—¶ï¼Œå‘ç°`int` è¿”å›çš„æ°¸è¿œæ˜¯`8`ï¼ˆæˆ–è€…åªæœ‰é”®æ²¡æœ‰å€¼ï¼‰ï¼Œ`String` è¿”å›çš„æ—¶`null`ï¼Œè™šæ‹Ÿæœºä¹Ÿä¼šå‡ºç°é—®é¢˜ã€‚

    ç ´æ¡ˆäº†ï¼Œåœ¨è¯·æ±‚`PendingIntent`è·å–å¹¿æ’­æ—¶ä¼ å…¥çš„`request code` æ˜¯0ï¼Œé€šè¿‡ä¼ å…¥ä¸åŒçš„`request code` å°±æ²¡æœ‰é—®é¢˜äº†ã€‚

6. è½¯ä»¶è€æ˜¯é‡å¤æ‰“å°ä¸€æ¡é”™è¯¯
    >W/System: A resource failed to call release.

    æˆ‘è§‰å¾—æˆ‘æ‰€æœ‰çš„èµ„æºéƒ½æ‰‹åŠ¨å…³é—­äº†ï¼Œæœ€åä¸€æ­¥ä¸€æ­¥çš„æµ‹è¯•ï¼Œå‘ç°é”™è¯¯å‡ºç°åœ¨`Cursor` ä¸Šï¼Œç‰¹åˆ«æ˜¯åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œï¼ŒåŸæœ¬çš„ä»£ç æ˜¯

    ```java
        Cursor cursor = sqLiteDatabase.rawQuery(xx4, new String[]{xx3});
        if (cursor != null && cursor.moveToFirst()) {
        do {
            String xx1 = cursor.getString(0);
            xx2.add(xx1);
        } while (cursor.moveToNext());
            cursor.close();
            return xx2;
        }
        return null;
    ```

    ç„¶åå°±ç”¨äº†`try finally` å¤„ç†å…³é—­æ“ä½œï¼Œè¿™ä¸ªæç¤ºå°±æ²¡æœ‰äº†ã€‚
    ä¸ºäº†ææ¸…ä¸ºä»€ä¹ˆï¼Œæ·»åŠ `catch` è¯­å¥æ•è·å¼‚å¸¸ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœ‰ã€‚
7. åšä¸€ä¸ªæ— éšœç¢åº”ç”¨ï¼Œå‘ç°åˆ«çš„åº”ç”¨éƒ½æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æˆ‘å´è·å¾—ä¸åˆ°ç™¾è¯æ–©çš„äº‹ä»¶ï¼Œè´¹è§£ã€‚
åŸæ¥ç™¾è¯æ–©çš„åŒ…åæ˜¯`com.jiongji.andriod.card` è€Œä¸æ˜¯`com.jiongji.android.card`ã€‚æ›´åŠ è´¹è§£äº†ã€‚
